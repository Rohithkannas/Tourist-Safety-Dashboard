<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alerts • Tourist Safety</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script> 
    tailwind.config = { 
      theme: { 
        extend: { 
          colors: { 
            bgdark: '#0a0a0a',
            sidebar: '#111111',
            card: '#1a1a1a'
          } 
        } 
      } 
    } 
  </script>
  <link rel="stylesheet" href="./assets/css/styles.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    /* Dark Theme (Default) */
    body { 
      background: #000000;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      color: #ffffff;
      transition: all 0.3s ease;
    }
    
    .sidebar {
      background: #1a1a1a;
      border-right: 1px solid #333333;
    }
    
    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      color: #ffffff;
      text-decoration: none;
      border-radius: 8px;
      margin: 4px 12px;
      transition: all 0.3s ease;
      background: transparent;
      border: 1px solid transparent;
    }
    
    .nav-item:hover {
      background: #dc2626;
      color: #ffffff;
      border-color: #dc2626;
      text-decoration: none;
    }
    
    .nav-item.active {
      background: #dc2626;
      color: #ffffff;
      border-color: #dc2626;
    }
    
    .nav-section-title {
      padding: 12px 16px 8px;
      font-size: 11px;
      font-weight: 700;
      color: #666666;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .alert-card {
      background: #1a1a1a;
      border: 1px solid #333333;
      border-radius: 12px;
      padding: 20px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }
    
    .alert-card:hover {
      transform: translateY(-2px);
      border-color: #dc2626;
      box-shadow: 0 8px 25px rgba(220, 38, 38, 0.2);
    }
    
    .alert-card.critical {
      border-color: rgba(220, 38, 38, 0.5);
      background: rgba(220, 38, 38, 0.1);
    }
    
    .alert-card.warning {
      border-color: rgba(245, 158, 11, 0.5);
      background: rgba(245, 158, 11, 0.1);
    }

    /* Status indicators */
    .status-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    
    .status-online { background: #22c55e; }
    .status-warning { background: #f59e0b; }
    .status-error { background: #dc2626; }
    
    /* Animations */
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-6px); }
    }
    
    .floating { animation: float 6s ease-in-out infinite; }

    @keyframes fadeIn {
      '0%': { opacity: '0', transform: 'translateY(10px)' },
      '100%': { opacity: '1', transform: 'translateY(0)' }
    }
    
    @keyframes slideUp {
      '0%': { opacity: '0', transform: 'translateY(20px)' },
      '100%': { opacity: '1', transform: 'translateY(0)' }
    }
    
    .animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
    .animate-slide-up { animation: slideUp 0.3s ease-out; }

    /* Header styles */
    .header-dark {
      background: #1a1a1a;
      border-bottom: 1px solid #333333;
    }
    
    body.light .header-dark {
      background: #f5f5f5;
      border-bottom: 1px solid #e0e0e0;
    }

    /* Button styles */
    .btn-primary {
      background: #dc2626;
      color: #ffffff;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 600;
      transition: all 0.3s ease;
      border: 1px solid #dc2626;
      cursor: pointer;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    
    .btn-primary:hover {
      background: #b91c1c;
      border-color: #b91c1c;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
      text-decoration: none;
      color: #ffffff;
    }

    .btn-secondary {
      background: #1a1a1a;
      color: #ffffff;
      padding: 8px 16px;
      border-radius: 6px;
      font-weight: 500;
      transition: all 0.3s ease;
      border: 1px solid #333333;
      cursor: pointer;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    
    .btn-secondary:hover {
      background: #333333;
      border-color: #666666;
      transform: translateY(-1px);
      text-decoration: none;
      color: #ffffff;
    }

    /* Light theme support */
    body.light {
      background: #ffffff;
      color: #000000;
    }
    
    body.light .sidebar {
      background: #f5f5f5;
      border-right: 1px solid #e0e0e0;
    }
    
    body.light .nav-item {
      color: #000000;
    }
    
    body.light .nav-item:hover {
      background: #dc2626;
      color: #ffffff;
      border-color: #dc2626;
    }
    
    body.light .nav-item.active {
      background: #dc2626;
      color: #ffffff;
      border-color: #dc2626;
    }
    
    body.light .alert-card {
      background: #ffffff;
      border: 1px solid #e0e0e0;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      color: #000000;
    }
    
    body.light .alert-card:hover {
      border-color: #dc2626;
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.15);
    }

    body.light h1,
    body.light h2,
    body.light h3,
    body.light h4,
    body.light p,
    body.light span {
      color: #000000;
    }
    
    body.light .text-white {
      color: #000000 !important;
    }
    
    body.light .text-white\/60 {
      color: #666666 !important;
    }

    body.light .btn-primary {
      background: #dc2626;
      color: #ffffff;
      border-color: #dc2626;
    }
    
    body.light .btn-primary:hover {
      background: #b91c1c;
      border-color: #b91c1c;
      color: #ffffff;
    }

    body.light .btn-secondary {
      background: #ffffff;
      color: #000000;
      border-color: #e0e0e0;
    }
    
    body.light .btn-secondary:hover {
      background: #f5f5f5;
      border-color: #cccccc;
      color: #000000;
    }
  </style>
</head>
<body class="text-white">
  <div class="flex h-screen">
    <!-- Left Sidebar -->
    <aside class="sidebar w-72 flex-shrink-0 overflow-y-auto">
      <div class="p-6">
        <!-- Logo -->
        <div class="flex items-center gap-3 mb-10 animate-fade-in">
          <div class="w-10 h-10 bg-gradient-to-br from-red-600 to-red-800 rounded-xl flex items-center justify-center floating">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
          <div>
            <h1 class="font-bold text-xl text-white">SafeGuard</h1>
            <p class="text-xs text-gray-400">Tourist Safety Platform</p>
          </div>
        </div>
        
        <!-- Navigation -->
        <nav class="space-y-2">
          <!-- Main Navigation -->
          <div class="mb-6">
            <a href="./dashboard.html" class="nav-item">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
              </svg>
              <span>Dashboard</span>
              <div class="status-indicator status-online ml-auto"></div>
            </a>
            
            <a href="./alerts.html" class="nav-item active">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
              </svg>
              <span>Emergency Alerts</span>
              <span class="ml-auto bg-red-600 text-white text-xs px-2 py-1 rounded-full">8</span>
            </a>
            
            <a href="./geofence.html" class="nav-item">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
              </svg>
              <span>Safety Zones</span>
            </a>
          </div>

          <!-- Analytics Section -->
          <div class="mb-6">
            <div class="nav-section-title">Analytics & Reports</div>
            <a href="./analytics.html" class="nav-item">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
              </svg>
              <span>Analytics Dashboard</span>
            </a>
            
            <a href="#" class="nav-item" onclick="showComingSoon('Automations')">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 102 0V3h4v1a1 1 0 102 0V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm2.5 7a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm2.45-1.5a2.5 2.5 0 114.9 0 2.5 2.5 0 01-4.9 0z" clip-rule="evenodd"/>
              </svg>
              <span>Smart Automations</span>
              <span class="ml-auto text-xs bg-red-600/20 text-red-400 px-2 py-1 rounded">Beta</span>
            </a>
          </div>

          <!-- Management Section -->
          <div class="mb-6">
            <div class="nav-section-title">Management</div>
            <a href="./audit.html" class="nav-item">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              <span>Audit Logs</span>
            </a>
            
            <a href="./settings.html" class="nav-item">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
              </svg>
              <span>System Settings</span>
            </a>
          </div>

          <!-- Support Section -->
          <div>
            <div class="nav-section-title">Support</div>
            <a href="#" class="nav-item" onclick="showComingSoon('Help Center')">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
              </svg>
              <span>Help Center</span>
            </a>
          </div>
        </nav>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto">
      <!-- Top Header -->
      <header class="header-dark px-8 py-6">
        <div class="flex items-center justify-between">
          <div class="animate-fade-in">
            <h1 class="text-3xl font-bold text-white">Emergency Alerts</h1>
            <p class="text-white/60 text-sm mt-2">Monitor and respond to tourist emergencies</p>
          </div>
          <div class="flex items-center gap-4 animate-slide-up">
            <div class="flex items-center gap-2 px-3 py-2 bg-red-500/20 rounded-lg border border-red-500/30">
              <div class="w-2 h-2 bg-red-400 rounded-full animate-pulse"></div>
              <span id="activeAlertsCount" class="text-red-400 text-sm font-medium">8 Active Alerts</span>
            </div>
            <!-- Tourist Search Bar -->
            <div class="relative">
              <input 
                type="text" 
                id="touristSearchInput" 
                placeholder="Search Tourist ID (e.g., T000001)" 
                class="px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-red-500 w-64"
                onkeypress="if(event.key === 'Enter') searchTourist()"
              />
              <button 
                onclick="searchTourist()" 
                class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors"
              >
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </header>

      <!-- Emergency Alerts Content -->
      <div class="p-8 max-w-7xl mx-auto">
        <!-- Risk Overview Section -->
        <section class="mb-8">
          <h2 class="text-2xl font-bold text-white mb-6">Risk Assessment Overview</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="alert-card border-l-4 border-red-500">
              <h3 class="font-semibold text-white mb-2">High Risk Areas</h3>
              <p class="text-3xl font-bold text-red-400 mb-2">3</p>
              <p class="text-sm text-white/70">Cherrapunji, Tura, Dawki Border</p>
            </div>
            <div class="alert-card border-l-4 border-yellow-500">
              <h3 class="font-semibold text-white mb-2">Medium Risk Areas</h3>
              <p class="text-3xl font-bold text-yellow-400 mb-2">7</p>
              <p class="text-sm text-white/70">Weather & Wildlife zones</p>
            </div>
            <div class="alert-card border-l-4 border-green-500">
              <h3 class="font-semibold text-white mb-2">Safe Areas</h3>
              <p class="text-3xl font-bold text-green-400 mb-2">15</p>
              <p class="text-sm text-white/70">Tourist-friendly locations</p>
            </div>
            <div class="alert-card border-l-4 border-blue-500">
              <h3 class="font-semibold text-white mb-2">Active Tourists</h3>
              <p class="text-3xl font-bold text-blue-400 mb-2">2,847</p>
              <p class="text-sm text-white/70">Currently monitored</p>
            </div>
          </div>
        </section>

        <!-- Main Alert Dashboard -->
        <div class="grid lg:grid-cols-4 gap-8">
          <!-- Tourist Details & Alerts -->
          <section class="lg:col-span-2">
            <div class="mb-6">
              <h3 class="font-semibold text-xl mb-4 text-white">Tourist Details & Active Alerts</h3>
              <div class="flex gap-2 text-xs mb-4">
                <button class="px-3 py-1 bg-red-500/20 text-red-400 rounded-full border border-red-500/30">Critical (3)</button>
                <button class="px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded-full border border-yellow-500/30">Warning (2)</button>
                <button class="px-3 py-1 bg-white/10 text-white/60 rounded-full border border-white/20">All (8)</button>
              </div>
            </div>
            
            <!-- Tourist Cards with Alert Details -->
            <div class="space-y-4" id="touristAlertsList">
              <!-- Tourist 1: John Smith - Medical Emergency -->
              <div class="alert-card critical">
                <div class="flex items-start justify-between mb-4">
                  <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-red-600 rounded-full flex items-center justify-center">
                      <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                      </svg>
                    </div>
                    <div>
                      <h4 class="font-semibold text-white text-lg">John Smith</h4>
                      <p class="text-red-400 text-sm font-medium">MEDICAL EMERGENCY - CRITICAL</p>
                    </div>
                  </div>
                  <span class="text-xs text-white/60 bg-red-500/20 px-2 py-1 rounded">2 min ago</span>
                </div>
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                  <div>
                    <p class="text-xs text-white/70 mb-1">Tourist ID</p>
                    <p class="text-white font-medium">TUR-2847</p>
                  </div>
                  <div>
                    <p class="text-xs text-white/70 mb-1">Nationality</p>
                    <p class="text-white font-medium">American</p>
                  </div>
                  <div>
                    <p class="text-xs text-white/70 mb-1">Current Location</p>
                    <p class="text-white font-medium">Cherrapunji Falls</p>
                  </div>
                  <div>
                    <p class="text-xs text-white/70 mb-1">Contact</p>
                    <p class="text-white font-medium">+1-555-0123</p>
                  </div>
                </div>
                <p class="text-white/80 text-sm mb-3">Tourist injured at Cherrapunji Falls. Ambulance dispatched. Requires immediate medical attention.</p>
                <div class="flex gap-2">
                  <button class="btn-primary text-xs px-4 py-2">Respond</button>
                  <button class="btn-secondary text-xs px-4 py-2">View Details</button>
                </div>
              </div>

              <!-- Tourist 2: Maria Garcia - Missing Tourist -->
              <div class="alert-card border-l-4 border-orange-500">
                <div class="flex items-start justify-between mb-4">
                  <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-orange-600 rounded-full flex items-center justify-center">
                      <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                      </svg>
                    </div>
                    <div>
                      <h4 class="font-semibold text-white text-lg">Maria Garcia</h4>
                      <p class="text-orange-400 text-sm font-medium">MISSING TOURIST - HIGH</p>
                    </div>
                  </div>
                  <span class="text-xs text-white/60 bg-orange-500/20 px-2 py-1 rounded">12 min ago</span>
                </div>
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                  <div>
                    <p class="text-xs text-white/70 mb-1">Tourist ID</p>
                    <p class="text-white font-medium">TUR-1923</p>
                  </div>
                  <div>
                    <p class="text-xs text-white/70 mb-1">Nationality</p>
                    <p class="text-white font-medium">Spanish</p>
                  </div>
                  <div>
                    <p class="text-xs text-white/70 mb-1">Last Known Location</p>
                    <p class="text-white font-medium">Mawlynnong Village</p>
                  </div>
                  <div>
                    <p class="text-xs text-white/70 mb-1">Contact</p>
                    <p class="text-white font-medium">+34-612-345-678</p>
                  </div>
                </div>
                <p class="text-white/80 text-sm mb-3">Tourist reported missing near Mawlynnong Village. Search and rescue team deployed.</p>
                <div class="flex gap-2">
                  <button class="btn-primary text-xs px-4 py-2">Track</button>
                  <button class="btn-secondary text-xs px-4 py-2">View Details</button>
                </div>
              </div>

              <!-- Tourist 3: David Chen - Communication Failure -->
              <div class="alert-card border-l-4 border-red-500">
                <div class="flex items-start justify-between mb-4">
                  <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-red-600 rounded-full flex items-center justify-center">
                      <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                      </svg>
                    </div>
                    <div>
                      <h4 class="font-semibold text-white text-lg">David Chen</h4>
                      <p class="text-red-400 text-sm font-medium">COMMUNICATION FAILURE - HIGH</p>
                    </div>
                  </div>
                  <span class="text-xs text-white/60 bg-red-500/20 px-2 py-1 rounded">1 hr ago</span>
                </div>
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                  <div>
                    <p class="text-xs text-white/70 mb-1">Tourist ID</p>
                    <p class="text-white font-medium">TUR-3456</p>
                  </div>
                  <div>
                    <p class="text-xs text-white/70 mb-1">Nationality</p>
                    <p class="text-white font-medium">Chinese</p>
                  </div>
                  <div>
                    <p class="text-xs text-white/70 mb-1">Last Known Location</p>
                    <p class="text-white font-medium">Remote Hills</p>
                  </div>
                  <div>
                    <p class="text-xs text-white/70 mb-1">Contact</p>
                    <p class="text-white font-medium">+86-138-0013-8000</p>
                  </div>
                </div>
                <p class="text-white/80 text-sm mb-3">Network outage in remote areas. Tourist out of contact for over 1 hour.</p>
                <div class="flex gap-2">
                  <button class="btn-primary text-xs px-4 py-2">Locate</button>
                  <button class="btn-secondary text-xs px-4 py-2">View Details</button>
                </div>
              </div>

              <!-- Tourist 4: Sarah Johnson - Weather Alert -->
              <div class="alert-card warning">
                <div class="flex items-start justify-between mb-4">
                  <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-yellow-600 rounded-full flex items-center justify-center">
                      <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                      </svg>
                    </div>
                    <div>
                      <h4 class="font-semibold text-white text-lg">Sarah Johnson</h4>
                      <p class="text-yellow-400 text-sm font-medium">WEATHER ALERT - WARNING</p>
                    </div>
                  </div>
                  <span class="text-xs text-white/60 bg-yellow-500/20 px-2 py-1 rounded">5 min ago</span>
                </div>
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                  <div>
                    <p class="text-xs text-white/70 mb-1">Tourist ID</p>
                    <p class="text-white font-medium">TUR-4789</p>
                  </div>
                  <div>
                    <p class="text-xs text-white/70 mb-1">Nationality</p>
                    <p class="text-white font-medium">British</p>
                  </div>
                  <div>
                    <p class="text-xs text-white/70 mb-1">Current Location</p>
                    <p class="text-white font-medium">Shillong City</p>
                  </div>
                  <div>
                    <p class="text-xs text-white/70 mb-1">Contact</p>
                    <p class="text-white font-medium">+44-20-7946-0958</p>
                  </div>
                </div>
                <p class="text-white/80 text-sm mb-3">Heavy rainfall warning for Shillong area. Tourist advised to stay indoors.</p>
                <div class="flex gap-2">
                  <button class="btn-secondary text-xs px-4 py-2">Monitor</button>
                  <button class="btn-secondary text-xs px-4 py-2">View Details</button>
                </div>
              </div>

              <!-- Tourist 5: Raj Patel - Wildlife Alert -->
              <div class="alert-card border-l-4 border-green-500">
                <div class="flex items-start justify-between mb-4">
                  <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-green-600 rounded-full flex items-center justify-center">
                      <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
                      </svg>
                    </div>
                    <div>
                      <h4 class="font-semibold text-white text-lg">Raj Patel</h4>
                      <p class="text-green-400 text-sm font-medium">WILDLIFE ALERT - MEDIUM</p>
                    </div>
                  </div>
                  <span class="text-xs text-white/60 bg-green-500/20 px-2 py-1 rounded">8 min ago</span>
                </div>
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                  <div>
                    <p class="text-xs text-white/70 mb-1">Tourist ID</p>
                    <p class="text-white font-medium">TUR-5012</p>
                  </div>
                  <div>
                    <p class="text-xs text-white/70 mb-1">Nationality</p>
                    <p class="text-white font-medium">Indian</p>
                  </div>
                  <div>
                    <p class="text-xs text-white/70 mb-1">Current Location</p>
                    <p class="text-white font-medium">Nokrek National Park</p>
                  </div>
                  <div>
                    <p class="text-xs text-white/70 mb-1">Contact</p>
                    <p class="text-white font-medium">+91-98765-43210</p>
                  </div>
                </div>
                <p class="text-white/80 text-sm mb-3">Elephant herd spotted near tourist trail. Group advised to maintain safe distance.</p>
                <div class="flex gap-2">
                  <button class="btn-secondary text-xs px-4 py-2">Monitor</button>
                  <button class="btn-secondary text-xs px-4 py-2">View Details</button>
                </div>
              </div>
            </div>
          </section>

          <!-- Regional Risk Analysis -->
          <section class="lg:col-span-2">
            <div class="alert-card">
              <h3 class="font-semibold text-xl mb-6 text-white">Regional Risk Analysis</h3>
              
              <!-- Risk by Region -->
              <div class="space-y-6">
                <div class="border-l-4 border-red-500 pl-4">
                  <h4 class="font-semibold text-white mb-2">East Khasi Hills - HIGH RISK</h4>
                  <div class="grid grid-cols-2 gap-4 mb-3">
                    <div>
                      <p class="text-xs text-white/70">Weather Risk</p>
                      <div class="w-full bg-gray-700 rounded-full h-2">
                        <div class="bg-red-500 h-2 rounded-full" style="width: 85%"></div>
                      </div>
                      <p class="text-xs text-red-400 mt-1">85% - Heavy rainfall</p>
                    </div>
                    <div>
                      <p class="text-xs text-white/70">Terrain Risk</p>
                      <div class="w-full bg-gray-700 rounded-full h-2">
                        <div class="bg-orange-500 h-2 rounded-full" style="width: 70%"></div>
                      </div>
                      <p class="text-xs text-orange-400 mt-1">70% - Steep terrain</p>
                    </div>
                  </div>
                  <p class="text-sm text-white/80">Cherrapunji and surrounding areas prone to sudden weather changes and landslides.</p>
                </div>

                <div class="border-l-4 border-orange-500 pl-4">
                  <h4 class="font-semibold text-white mb-2">West Garo Hills - MEDIUM RISK</h4>
                  <div class="grid grid-cols-2 gap-4 mb-3">
                    <div>
                      <p class="text-xs text-white/70">Wildlife Risk</p>
                      <div class="w-full bg-gray-700 rounded-full h-2">
                        <div class="bg-yellow-500 h-2 rounded-full" style="width: 60%"></div>
                      </div>
                      <p class="text-xs text-yellow-400 mt-1">60% - Elephant corridors</p>
                    </div>
                    <div>
                      <p class="text-xs text-white/70">Communication Risk</p>
                      <div class="w-full bg-gray-700 rounded-full h-2">
                        <div class="bg-orange-500 h-2 rounded-full" style="width: 45%"></div>
                      </div>
                      <p class="text-xs text-orange-400 mt-1">45% - Network issues</p>
                    </div>
                  </div>
                  <p class="text-sm text-white/80">Tura and Nokrek areas have wildlife activity and limited connectivity.</p>
                </div>

                <div class="border-l-4 border-yellow-500 pl-4">
                  <h4 class="font-semibold text-white mb-2">West Jaintia Hills - MEDIUM RISK</h4>
                  <div class="grid grid-cols-2 gap-4 mb-3">
                    <div>
                      <p class="text-xs text-white/70">Border Security</p>
                      <div class="w-full bg-gray-700 rounded-full h-2">
                        <div class="bg-yellow-500 h-2 rounded-full" style="width: 55%"></div>
                      </div>
                      <p class="text-xs text-yellow-400 mt-1">55% - Border monitoring</p>
                    </div>
                    <div>
                      <p class="text-xs text-white/70">Water Activities</p>
                      <div class="w-full bg-gray-700 rounded-full h-2">
                        <div class="bg-blue-500 h-2 rounded-full" style="width: 40%"></div>
                      </div>
                      <p class="text-xs text-blue-400 mt-1">40% - River/waterfall risks</p>
                    </div>
                  </div>
                  <p class="text-sm text-white/80">Dawki border area requires special permits and monitoring.</p>
                </div>

                <div class="border-l-4 border-green-500 pl-4">
                  <h4 class="font-semibold text-white mb-2">Ri-Bhoi - LOW RISK</h4>
                  <div class="grid grid-cols-2 gap-4 mb-3">
                    <div>
                      <p class="text-xs text-white/70">Overall Safety</p>
                      <div class="w-full bg-gray-700 rounded-full h-2">
                        <div class="bg-green-500 h-2 rounded-full" style="width: 90%"></div>
                      </div>
                      <p class="text-xs text-green-400 mt-1">90% - Very safe</p>
                    </div>
                    <div>
                      <p class="text-xs text-white/70">Infrastructure</p>
                      <div class="w-full bg-gray-700 rounded-full h-2">
                        <div class="bg-green-500 h-2 rounded-full" style="width: 85%"></div>
                      </div>
                      <p class="text-xs text-green-400 mt-1">85% - Good connectivity</p>
                    </div>
                  </div>
                  <p class="text-sm text-white/80">Umiam Lake area is well-developed with good tourist infrastructure.</p>
                </div>
              </div>

              <!-- Emergency Response Stats -->
              <div class="mt-8 pt-6 border-t border-gray-700">
                <h4 class="font-semibold text-white mb-4">Emergency Response Statistics</h4>
                <div class="grid grid-cols-3 gap-4">
                  <div class="text-center">
                    <p class="text-2xl font-bold text-green-400">4.2min</p>
                    <p class="text-xs text-white/70">Avg Response Time</p>
                  </div>
                  <div class="text-center">
                    <p class="text-2xl font-bold text-blue-400">12</p>
                    <p class="text-xs text-white/70">Active Response Teams</p>
                  </div>
                  <div class="text-center">
                    <p class="text-2xl font-bold text-yellow-400">98.7%</p>
                    <p class="text-xs text-white/70">Success Rate</p>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </main>
  </div>

  <!-- Firestore API -->
  <script src="./assets/js/firestore-api.js"></script>
  
  <script>
    // Apply saved theme on load
    document.addEventListener('DOMContentLoaded', async function() {
      // Check user authentication
      const user = localStorage.getItem('user');
      if (!user) {
        window.location.href = './login.html';
        return;
      }
      
      const savedTheme = localStorage.getItem('theme') || 'dark';
      if (savedTheme === 'light') {
        document.body.classList.add('light');
      }

      // Initialize Firestore API and load real data
      await loadRealAlerts();
    });

    // Load real alerts from Firestore
    async function loadRealAlerts() {
      try {
        console.log('🔄 Loading real alerts from Firestore...');
        
        // Initialize Firestore API
        await FirestoreAPI.init();
        
        // Get statistics
        const stats = await FirestoreAPI.fetchStatistics();
        
        // Update risk overview cards
        updateRiskOverview(stats);
        
        // Get all alerts
        const allAlerts = await FirestoreAPI.fetchAlerts({ limit: 100 });
        
        // Get critical alerts
        const criticalAlerts = allAlerts.filter(a => a.priority === 'critical' && a.status === 'pending');
        const warningAlerts = allAlerts.filter(a => a.priority === 'high' && a.status === 'pending');
        const infoAlerts = allAlerts.filter(a => a.priority === 'medium' && a.status === 'pending');
        
        // Update active alerts count
        const activeCount = criticalAlerts.length + warningAlerts.length;
        document.querySelectorAll('.text-red-400').forEach(el => {
          if (el.textContent.includes('Active Alerts')) {
            el.textContent = `${activeCount} Active Alerts`;
          }
        });
        
        // Update filter buttons
        updateFilterButtons(criticalAlerts.length, warningAlerts.length, infoAlerts.length);
        
        // Display alerts
        displayAlerts(allAlerts);
        
        console.log('✅ Alerts loaded successfully');
        console.log(`   📊 Total: ${allAlerts.length}`);
        console.log(`   🚨 Critical: ${criticalAlerts.length}`);
        console.log(`   ⚠️  Warning: ${warningAlerts.length}`);
        
      } catch (error) {
        console.error('❌ Error loading alerts:', error);
        showNotification('Failed to load alerts. Please refresh the page.', 'error');
      }
    }

    // Update risk overview cards
    function updateRiskOverview(stats) {
      // Update high risk areas (tourists in restricted zones)
      const highRiskCard = document.querySelector('.border-red-500');
      if (highRiskCard) {
        const countEl = highRiskCard.querySelector('.text-red-400');
        if (countEl) countEl.textContent = stats.tourists.inRestrictedZones || 0;
      }
      
      // Update medium risk areas (inactive tourists)
      const mediumRiskCard = document.querySelector('.border-yellow-500');
      if (mediumRiskCard) {
        const countEl = mediumRiskCard.querySelector('.text-yellow-400');
        if (countEl) countEl.textContent = stats.tourists.inactive || 0;
      }
      
      // Update safe areas (active tourists)
      const safeCard = document.querySelector('.border-green-500');
      if (safeCard) {
        const countEl = safeCard.querySelector('.text-green-400');
        if (countEl) countEl.textContent = stats.zones.active || 0;
      }
      
      // Update active tourists
      const touristsCard = document.querySelector('.border-blue-500');
      if (touristsCard) {
        const countEl = touristsCard.querySelector('.text-blue-400');
        if (countEl) countEl.textContent = stats.tourists.active.toLocaleString() || 0;
      }
    }

    // Update filter buttons
    function updateFilterButtons(critical, warning, info) {
      const buttons = document.querySelectorAll('.px-3.py-1');
      buttons.forEach(btn => {
        if (btn.textContent.includes('Critical')) {
          btn.textContent = `Critical (${critical})`;
        } else if (btn.textContent.includes('Warning')) {
          btn.textContent = `Warning (${warning})`;
        } else if (btn.textContent.includes('Info')) {
          btn.textContent = `Info (${info})`;
        }
      });
    }

    // Display alerts
    function displayAlerts(alerts) {
      const container = document.getElementById('touristAlertsList');
      if (!container) return;
      
      container.innerHTML = '';
      
      // Sort by priority and timestamp
      const sortedAlerts = alerts.sort((a, b) => {
        const priorityOrder = { critical: 0, high: 1, medium: 2, low: 3 };
        if (priorityOrder[a.priority] !== priorityOrder[b.priority]) {
          return priorityOrder[a.priority] - priorityOrder[b.priority];
        }
        return new Date(b.timestamp) - new Date(a.timestamp);
      });
      
      // Display top 10 alerts
      sortedAlerts.slice(0, 10).forEach(alert => {
        const alertCard = createAlertCard(alert);
        container.appendChild(alertCard);
      });
    }

    // Create alert card
    function createAlertCard(alert) {
      const div = document.createElement('div');
      
      // Determine card style based on priority
      let cardClass = 'alert-card';
      let borderColor = '';
      let bgColor = '';
      let iconBg = '';
      let textColor = '';
      
      switch(alert.priority) {
        case 'critical':
          cardClass += ' critical border-l-4 border-red-500';
          iconBg = 'bg-red-600';
          textColor = 'text-red-400';
          break;
        case 'high':
          cardClass += ' warning border-l-4 border-orange-500';
          iconBg = 'bg-orange-600';
          textColor = 'text-orange-400';
          break;
        case 'medium':
          cardClass += ' border-l-4 border-yellow-500';
          iconBg = 'bg-yellow-600';
          textColor = 'text-yellow-400';
          break;
        default:
          cardClass += ' border-l-4 border-blue-500';
          iconBg = 'bg-blue-600';
          textColor = 'text-blue-400';
      }
      
      div.className = cardClass;
      
      // Format timestamp
      const timeAgo = getTimeAgo(alert.timestamp);
      
      // Get tourist name from ID (simplified)
      const touristName = `Tourist ${alert.touristId}`;
      
      div.innerHTML = `
        <div class="flex items-start justify-between mb-4">
          <div class="flex items-center gap-4">
            <div class="w-12 h-12 ${iconBg} rounded-full flex items-center justify-center">
              <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
              </svg>
            </div>
            <div>
              <h4 class="font-semibold text-white text-lg">${touristName}</h4>
              <p class="${textColor} text-sm font-medium">${alert.type.toUpperCase()} - ${alert.priority.toUpperCase()}</p>
            </div>
          </div>
          <span class="text-xs text-white/60 bg-${alert.priority === 'critical' ? 'red' : alert.priority === 'high' ? 'orange' : 'yellow'}-500/20 px-2 py-1 rounded">${timeAgo}</span>
        </div>
        <div class="mb-4">
          <p class="text-white/90 mb-2">${alert.message}</p>
          <div class="flex items-center gap-4 text-sm text-white/70">
            <span>📍 ${alert.location.address}</span>
            <span>🆔 ${alert.touristId}</span>
          </div>
        </div>
        <div class="flex gap-2">
          <button onclick="acknowledgeAlert('${alert.id}')" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm transition-colors">
            Acknowledge
          </button>
          <button onclick="resolveAlert('${alert.id}')" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm transition-colors">
            Resolve
          </button>
          <button onclick="viewAlertDetails('${alert.id}')" class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg text-sm transition-colors">
            View Details
          </button>
        </div>
      `;
      
      return div;
    }

    // Get time ago string
    function getTimeAgo(timestamp) {
      const now = new Date();
      const time = new Date(timestamp);
      const diff = Math.floor((now - time) / 1000); // seconds
      
      if (diff < 60) return `${diff}s ago`;
      if (diff < 3600) return `${Math.floor(diff / 60)}min ago`;
      if (diff < 86400) return `${Math.floor(diff / 3600)}h ago`;
      return `${Math.floor(diff / 86400)}d ago`;
    }

    // Acknowledge alert
    async function acknowledgeAlert(alertId) {
      try {
        const user = JSON.parse(localStorage.getItem('user'));
        await FirestoreAPI.updateAlert(alertId, {
          status: 'acknowledged',
          acknowledgedBy: user.email,
          acknowledgedAt: new Date().toISOString()
        });
        
        showNotification('Alert acknowledged successfully', 'success');
        await loadRealAlerts(); // Reload alerts
      } catch (error) {
        console.error('Error acknowledging alert:', error);
        showNotification('Failed to acknowledge alert', 'error');
      }
    }

    // Resolve alert
    async function resolveAlert(alertId) {
      try {
        const user = JSON.parse(localStorage.getItem('user'));
        await FirestoreAPI.updateAlert(alertId, {
          status: 'resolved',
          resolvedBy: user.email,
          resolvedAt: new Date().toISOString()
        });
        
        showNotification('Alert resolved successfully', 'success');
        await loadRealAlerts(); // Reload alerts
      } catch (error) {
        console.error('Error resolving alert:', error);
        showNotification('Failed to resolve alert', 'error');
      }
    }

    // View alert details
    function viewAlertDetails(alertId) {
      showNotification(`Viewing details for alert ${alertId}`, 'info');
      // TODO: Implement modal or redirect to details page
    }

    // Show notification
    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      const bgColor = type === 'success' ? 'bg-green-600' : type === 'error' ? 'bg-red-600' : 'bg-blue-600';
      notification.className = `fixed top-4 right-4 ${bgColor} text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300`;
      notification.textContent = message;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.opacity = '0';
        setTimeout(() => document.body.removeChild(notification), 300);
      }, 3000);
    }

    // Search tourist by ID
    async function searchTourist() {
      const searchInput = document.getElementById('touristSearchInput');
      const touristId = searchInput.value.trim().toUpperCase();
      
      if (!touristId) {
        showNotification('Please enter a Tourist ID', 'error');
        return;
      }
      
      try {
        showNotification('Searching...', 'info');
        
        // Fetch tourist details from database
        const tourist = await FirestoreAPI.fetchTouristById(touristId);
        
        // Display tourist details in modal
        displayTouristDetails(tourist);
        
      } catch (error) {
        console.error('Error searching tourist:', error);
        showNotification(`Tourist ${touristId} not found in database`, 'error');
      }
    }

    // Display tourist details in modal
    function displayTouristDetails(tourist) {
      // Create modal
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4';
      modal.onclick = (e) => {
        if (e.target === modal) closeModal();
      };
      
      // Format last active time
      const lastActive = tourist.lastActive ? new Date(tourist.lastActive).toLocaleString() : 'N/A';
      
      modal.innerHTML = `
        <div class="bg-gray-900 rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto border border-gray-700 shadow-2xl" onclick="event.stopPropagation()">
          <!-- Header -->
          <div class="bg-gradient-to-r from-red-600 to-red-800 px-6 py-4 flex items-center justify-between rounded-t-xl">
            <div class="flex items-center gap-4">
              <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center">
                <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                </svg>
              </div>
              <div>
                <h2 class="text-2xl font-bold text-white">${tourist.name}</h2>
                <p class="text-white/80 text-sm">Tourist ID: ${tourist.id}</p>
              </div>
            </div>
            <button onclick="closeModal()" class="text-white/80 hover:text-white transition-colors">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
              </svg>
            </button>
          </div>
          
          <!-- Content -->
          <div class="p-6 space-y-6">
            <!-- Status Badge -->
            <div class="flex items-center gap-3">
              <span class="px-4 py-2 rounded-full text-sm font-semibold ${
                tourist.status === 'active' ? 'bg-green-500/20 text-green-400 border border-green-500/30' :
                tourist.status === 'inactive' ? 'bg-yellow-500/20 text-yellow-400 border border-yellow-500/30' :
                'bg-red-500/20 text-red-400 border border-red-500/30'
              }">
                ${tourist.status.toUpperCase()}
              </span>
              ${tourist.inRestrictedZone ? '<span class="px-4 py-2 rounded-full text-sm font-semibold bg-red-500/20 text-red-400 border border-red-500/30">⚠️ IN RESTRICTED ZONE</span>' : ''}
            </div>
            
            <!-- Personal Information -->
            <div class="bg-gray-800/50 rounded-lg p-4 border border-gray-700">
              <h3 class="text-lg font-semibold text-white mb-4 flex items-center gap-2">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                </svg>
                Personal Information
              </h3>
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <p class="text-gray-400 text-sm mb-1">Full Name</p>
                  <p class="text-white font-medium">${tourist.name}</p>
                </div>
                <div>
                  <p class="text-gray-400 text-sm mb-1">Nationality</p>
                  <p class="text-white font-medium">${tourist.nationality}</p>
                </div>
                <div>
                  <p class="text-gray-400 text-sm mb-1">Age</p>
                  <p class="text-white font-medium">${tourist.age} years</p>
                </div>
                <div>
                  <p class="text-gray-400 text-sm mb-1">Gender</p>
                  <p class="text-white font-medium">${tourist.gender}</p>
                </div>
                <div>
                  <p class="text-gray-400 text-sm mb-1">Passport Number</p>
                  <p class="text-white font-medium">${tourist.passport}</p>
                </div>
                <div>
                  <p class="text-gray-400 text-sm mb-1">Phone Number</p>
                  <p class="text-white font-medium">${tourist.phone}</p>
                </div>
              </div>
            </div>
            
            <!-- Location Information -->
            <div class="bg-gray-800/50 rounded-lg p-4 border border-gray-700">
              <h3 class="text-lg font-semibold text-white mb-4 flex items-center gap-2">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                </svg>
                Location Information
              </h3>
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <p class="text-gray-400 text-sm mb-1">Current Location</p>
                  <p class="text-white font-medium">${tourist.location.address}</p>
                </div>
                <div>
                  <p class="text-gray-400 text-sm mb-1">District</p>
                  <p class="text-white font-medium">${tourist.location.district}</p>
                </div>
                <div>
                  <p class="text-gray-400 text-sm mb-1">Coordinates</p>
                  <p class="text-white font-medium">${tourist.location.lat.toFixed(4)}, ${tourist.location.lng.toFixed(4)}</p>
                </div>
                <div>
                  <p class="text-gray-400 text-sm mb-1">Last Active</p>
                  <p class="text-white font-medium">${lastActive}</p>
                </div>
              </div>
            </div>
            
            <!-- Emergency Contact -->
            <div class="bg-gray-800/50 rounded-lg p-4 border border-gray-700">
              <h3 class="text-lg font-semibold text-white mb-4 flex items-center gap-2">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                </svg>
                Emergency Contact
              </h3>
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <p class="text-gray-400 text-sm mb-1">Contact Name</p>
                  <p class="text-white font-medium">${tourist.emergencyContact.name}</p>
                </div>
                <div>
                  <p class="text-gray-400 text-sm mb-1">Relationship</p>
                  <p class="text-white font-medium">${tourist.emergencyContact.relationship}</p>
                </div>
                <div class="col-span-2">
                  <p class="text-gray-400 text-sm mb-1">Phone Number</p>
                  <p class="text-white font-medium">${tourist.emergencyContact.phone}</p>
                </div>
              </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex gap-3 pt-4">
              <button onclick="trackTourist('${tourist.id}')" class="flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                </svg>
                Track on Map
              </button>
              <button onclick="contactTourist('${tourist.phone}')" class="flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                </svg>
                Call Tourist
              </button>
              <button onclick="closeModal()" class="px-4 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors">
                Close
              </button>
            </div>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      
      // Clear search input
      document.getElementById('touristSearchInput').value = '';
    }

    // Close modal
    function closeModal() {
      const modal = document.querySelector('.fixed.inset-0');
      if (modal) {
        modal.remove();
      }
    }

    // Track tourist on map
    function trackTourist(touristId) {
      showNotification(`Tracking tourist ${touristId} on map...`, 'info');
      // TODO: Implement map tracking
    }

    // Contact tourist
    function contactTourist(phone) {
      window.location.href = `tel:${phone}`;
    }

    // Coming soon notification
    function showComingSoon(feature) {
      showNotification(`${feature} feature is coming soon!`, 'info');
    }
  </script>
</body>
</html>